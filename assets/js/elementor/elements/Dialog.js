var ldVars={postID:ecomPostId,videoReqMsg:"You must watch the video before accessing this content",ajaxurl:`${ecomUrl}wp-admin/admin-ajax.php`};function ldGetUrlVars(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,s){e[a]=s}),e}jQuery(function(e){var t,a=window.location.hash;if(function e(){if(jQuery(".learndash-wrapper .ld-focus").length){var t=jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar-wrapper"),a=jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar-wrapper .ld-is-current-item");if(void 0!==a&&a.length)var s=a;else{var n=jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar-wrapper .ld-is-current-lesson");if(void 0!==n&&n.length)var s=n}if(void 0!==s&&s.length){var i=0;jQuery(".learndash-wrapper .ld-focus .ld-focus-header").length&&(i+=jQuery(".learndash-wrapper .ld-focus .ld-focus-header").height()),jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar .ld-course-navigation-heading").length&&(i+=jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar .ld-course-navigation-heading").height()),jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar .ld-focus-sidebar-wrapper").length&&(i+=jQuery(".learndash-wrapper .ld-focus .ld-focus-sidebar .ld-focus-sidebar-wrapper").height()),i-=jQuery(s).height(),t.animate({scrollTop:s.offset().top-i},1e3)}}}(),void 0!==(t=e(".learndash-wrapper-login-modal"))&&t.length&&e(t).prependTo("body"),"#login"==a&&h(),void 0!==ldGetUrlVars().login)"failed"==ldGetUrlVars().login&&h();if(void 0!==ldGetUrlVars()["ld-topic-page"]){var s=e("#ld-expand-"+Object.values(ldGetUrlVars()["ld-topic-page"].split("-"))[0]);c(e(s).find(".ld-expand-button")),e("html, body").animate({scrollTop:e(s).offset().top},500)}e("body").on("click",'a[href="#login"]',function(e){e.preventDefault(),h()}),e("body").on("click",".ld-modal-closer",function(e){e.preventDefault(),f()}),e("body").on("click","#ld-comments-post-button",function(t){e(this).addClass("ld-open"),e("#ld-comments-form").removeClass("ld-collapsed"),e("textarea#comment").focus()}),e(document).on("keyup",function(e){27===e.keyCode&&f()}),e(".learndash-wrapper").on("click","a.user_statistic",function e(t){t.preventDefault();var a=jQuery(this).data("ref-id"),s=jQuery(this).data("quiz-id"),n=jQuery(this).data("user-id"),i=jQuery(this).data("statistic-nonce");jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var o=jQuery("#wpProQuiz_user_content").hide();jQuery.ajax({type:"POST",url:ldVars.ajaxurl,dataType:"json",cache:!1,data:{action:"wp_pro_quiz_admin_ajax_statistic_load_user",func:"statisticLoadUser",data:{quizId:s,userId:n,refId:a,statistic_nonce:i,avg:0}},error(e,t,a){},success(e){void 0!==e.html&&(o.html(e.html),jQuery("#wpProQuiz_user_content").show(),jQuery("body").trigger("learndash-statistics-contentchanged"),jQuery("#wpProQuiz_loadUserData").hide(),o.find(".statistic_data").on("click",function(){return jQuery(this).parents("tr").next().toggle("fast"),!1}))}}),jQuery("#wpProQuiz_overlay_close").on("click",function(){jQuery("#wpProQuiz_user_overlay").hide()})}),o(),e("body").on("click",".ld-focus-sidebar-trigger",function(t){e(".ld-focus").hasClass("ld-focus-sidebar-collapsed")?l():d()}),e("body").on("click",".ld-mobile-nav a",function(t){t.preventDefault(),e(".ld-focus").hasClass("ld-focus-sidebar-collapsed")?l():d()}),e(".ld-js-register-account").on("click",function(t){t.preventDefault(),e(".ld-login-modal-register .ld-modal-text").slideUp("slow"),e(".ld-login-modal-register .ld-alert").slideUp("slow"),e(this).slideUp("slow",function(){e("#ld-user-register").slideDown("slow")})}),""==e(".registration-login-link").attr("href")&&(e(".registration-login-link").on("click",function(t){t.preventDefault(),e("#learndash_registerform, .registration-login").hide(),e(".registration-login-form, .show-register-form, .show-password-reset-link").show()}),e(".show-register-form").on("click",function(t){t.preventDefault(),e(".registration-login-form, .show-register-form, .show-password-reset-link").hide(),e("#learndash_registerform, .registration-login").show()}));var n=e(window).width();if(e(window).on("orientationchange",function(){n=e(window).width()}),e(window).on("resize",function(){e(this).width()!==n&&1024>=e(this).width()&&setTimeout(function(){1024>e(window).width()&&!e(".ld-focus").hasClass("ld-focus-sidebar-collapsed")?d():1024<=e(window).width()&&e(".ld-focus").hasClass("ld-focus-sidebar-filtered")?d():1024<=e(window).width()&&!e(".ld-focus").hasClass("ld-focus-sidebar-filtered")&&e(".ld-focus").hasClass("ld-focus-sidebar-collapsed")&&l()},50)}),e(".ld-course-status-content").length){var i=0;e(".ld-course-status-content").each(function(){e(this).height()>i&&(i=e(this).height())}),e(".ld-course-status-content").height(i)}function o(){1024>e(window).width()&&(e(".ld-focus").addClass("ld-focus-sidebar-collapsed"),e(".ld-focus").removeClass("ld-focus-initial-transition"),e(".ld-mobile-nav").removeClass("expanded"),g())}function d(){e(".ld-focus").addClass("ld-focus-sidebar-collapsed"),e(".ld-mobile-nav").removeClass("expanded"),e(".ld-focus-sidebar-trigger .ld-icon").hasClass("ld-icon-arrow-left")?(e(".ld-focus-sidebar-trigger .ld-icon").removeClass("ld-icon-arrow-left"),e(".ld-focus-sidebar-trigger .ld-icon").addClass("ld-icon-arrow-right")):e(".ld-focus-sidebar-trigger .ld-icon").hasClass("ld-icon-arrow-right")&&(e(".ld-focus-sidebar-trigger .ld-icon").removeClass("ld-icon-arrow-right"),e(".ld-focus-sidebar-trigger .ld-icon").addClass("ld-icon-arrow-left")),g()}function l(){o(),e(".ld-focus").removeClass("ld-focus-sidebar-collapsed"),e(".ld-mobile-nav").addClass("expanded"),e(".ld-focus-sidebar-trigger .ld-icon").hasClass("ld-icon-arrow-left")?(e(".ld-focus-sidebar-trigger .ld-icon").removeClass("ld-icon-arrow-left"),e(".ld-focus-sidebar-trigger .ld-icon").addClass("ld-icon-arrow-right")):e(".ld-focus-sidebar-trigger .ld-icon").hasClass("ld-icon-arrow-right")&&(e(".ld-focus-sidebar-trigger .ld-icon").removeClass("ld-icon-arrow-right"),e(".ld-focus-sidebar-trigger .ld-icon").addClass("ld-icon-arrow-left")),g()}function r(t,a){var s=e(a)[0].hasAttribute("data-ld-expand-text")?e(a).attr("data-ld-expand-text"):"Expand",n=e(a)[0].hasAttribute("data-ld-collapse-text")?e(a).attr("data-ld-collapse-text"):"Collapse";"collapse"==t?(e(a).removeClass("ld-expanded"),"false"!==n&&e(a).find(".ld-text").text(s)):(e(a).addClass("ld-expanded"),"false"!==n&&e(a).find(".ld-text").text(n))}function c(t,a){void 0===a&&(a=!1);var s=t.parents(".ld-focus-sidebar");if(void 0===s||!s.length)var s=t.parents(".learndash-wrapper");if(void 0!==s&&s.length){var n=e(t).hasClass("ld-expanded");if(e(t)[0]&&e(t)[0].hasAttribute("data-ld-expands")){var i,o,d,l,u,p,h=e(t).attr("data-ld-expands");if(void 0===h||!h.length)return;var f=e(s).find('[data-ld-expand-id="'+h+'"]');if(void 0===f||!f.length)return;var m=e(f).find(".ld-item-list-item-expanded");m.length&&(f=m);var v=0;if(f.find("> *").each(function(){v+=e(this).outerHeight()}),f.attr("data-height",""+(v+50)),e(s).find('[data-ld-expand-id="'+h+'"]')[0].hasAttribute("data-ld-expand-list")){var b=e(s).find('[data-ld-expand-id="'+h+'"]').find(".ld-expand-button");n?(r("collapse",t),b.each(function(){c(e(this),!0)})):(r("expand",t),b.each(function(){c(e(this))}))}else{e(s).find('[data-ld-expand-id="'+h+'"]').length?n||!0==a?(i=t,o=e(s).find('[data-ld-expand-id="'+h+'"]'),d=f,o.removeClass("ld-expanded"),r("collapse",i),d.css({"max-height":0})):(l=t,u=e(s).find('[data-ld-expand-id="'+h+'"]'),p=f,u.addClass("ld-expanded"),r("expand",l),p.css({"max-height":p.data("height")})):console.log("LearnDash: No expandable content was found")}g()}}}window.matchMedia("(orientation: landscape)").addListener(function t(a){a.matches&&1024<=e(window).width()&&!e(".ld-focus").hasClass("ld-focus-sidebar-filtered")&&e(".ld-focus").hasClass("ld-focus-sidebar-collapsed")&&l()}),e(".ld-file-input").each(function(){var t=e(this),a=t.next("label"),s=a.html();t.on("change",function(t){var n="";this.files&&1<this.files.length?n=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):t.target.value&&(n=t.target.value.split("\\").pop()),n?(a.find("span").html(n),a.addClass("ld-file-selected"),e("#uploadfile_btn").attr("disabled",!1)):(a.html(s),a.removeClass("ld-file-selected"),e("#uploadfile_btn").attr("disabled",!0))}),e("#uploadfile_form").on("submit",function(){a.removeClass("ld-file-selected"),e("#uploadfile_btn").attr("disabled",!0)}),t.on("focus",function(){t.addClass("has-focus")}).on("blur",function(){t.removeClass("has-focus")})}),e("body").on("click",".ld-expand-button",function(t){t.preventDefault(),c(e(this)),g()}),e("body").on("click",".ld-search-prompt",function(t){t.preventDefault(),e("#course_name_field").focus(),c(e(this))}),e("body").on("click",".ld-closer",function(t){c(e(".ld-search-prompt"),!0)}),e("body").on("click",".ld-tabs-navigation .ld-tab",function(){var t=e("#"+e(this).attr("data-ld-tab"));t.length&&(e(".ld-tabs-navigation .ld-tab.ld-active").removeClass("ld-active"),e(".ld-tabs-navigation .ld-tab").removeAttr("aria-selected"),e(this).addClass("ld-active"),e(this).attr("aria-selected","true"),e(".ld-tabs-content .ld-tab-content.ld-visible").removeClass("ld-visible"),t.addClass("ld-visible")),g()});var u=e("*[data-ld-tooltip]");function p(){if(e("#learndash-tooltips").length&&(e("#learndash-tooltips").remove(),u=e("*[data-ld-tooltip]")),u.length){e("body").prepend('<div id="learndash-tooltips"></div>');var t=1;u.each(function(){var a=e(this);if(a.hasClass("ld-item-list-item")&&(a=a.find(".ld-item-title")),void 0!==a&&e(a).hasClass("ld-status-waiting")){e(a).on("click",function(e){return e.preventDefault(),!1});var s=e(a).parents("a");void 0!==s&&e(s).on("click",function(e){return e.preventDefault(),!1})}a.offset().top,a.offset().left,a.outerWidth();var n=e(this).attr("data-ld-tooltip"),i=Math.floor(99999*Math.random()),o='<span id="ld-tooltip-'+i+'" class="ld-tooltip">'+n+"</span>";e(this).attr("data-ld-tooltip-id",i),e("#learndash-tooltips").append(o),t++;var o=e("#ld-tooltip-"+i);e(this).on("mouseenter",function(){o.addClass("ld-visible")}).on("mouseleave",function(){o.removeClass("ld-visible")})}),e(window).on("resize",function(){g()}),e(window).add(".ld-focus-sidebar-wrapper").on("scroll",function(){e(".ld-visible.ld-tooltip").removeClass("ld-visible"),g()}),g()}}function h(){var t=e(".learndash-wrapper-login-modal");void 0!==t&&t.length&&(e(t).addClass("ld-modal-open"),e(t).removeClass("ld-modal-closed"),e("html, body").animate({scrollTop:e(".ld-modal",t).offset().top},50))}function f(){var t=e(".learndash-wrapper-login-modal");void 0!==t&&t.length&&(e(t).removeClass("ld-modal-open"),e(t).addClass("ld-modal-closed"))}function g(){void 0!==u&&setTimeout(function(){u.each(function(){var t=e(this);$tooltip=e("#ld-tooltip-"+t.attr("data-ld-tooltip-id")),t.hasClass("ld-item-list-item")&&(t=t.find(".ld-status-icon"));var a=jQuery(t).parents(".ld-focus-sidebar"),s=t.offset().left+(t.outerWidth()+10);a.length&&(s=t.offset().left+(t.outerWidth()-18));var n=e(".ld-focus-main").height(),i=t.offset().top+-3;if(n)o=i<n?i:n,d=s;else var o=t.offset().top+-3,d=t.offset().left;$tooltip.css({top:o,left:d,"margin-left":0,"margin-right":0}).removeClass("ld-shifted-left ld-shifted-right"),$tooltip.offset().left<=0&&$tooltip.css({"margin-left":Math.abs($tooltip.offset().left)}).addClass("ld-shifted-left");var l=e(window).width()-($tooltip.offset().left+$tooltip.outerWidth());0>=l&&360<e(window).width()&&$tooltip.css({"margin-right":Math.abs(l)}).addClass("ld-shifted-right")})},500)}if(p(),e("body").on("click","#ld-profile .ld-reset-button",function(t){t.preventDefault(),e("#ld-profile #course_name_field").val("");var a={shortcode_instance:e("#ld-profile").data("shortcode_instance")};a["ld-profile-search"]=e(this).parents(".ld-item-search-wrapper").find("#course_name_field").val(),a["ld-profile-search-nonce"]=e(this).parents(".ld-item-search-wrapper").find("form.ld-item-search-fields").data("nonce"),e("#ld-profile #ld-main-course-list").addClass("ld-loading"),e.ajax({type:"GET",url:ldVars.ajaxurl+"?action=ld30_ajax_profile_search",data:a,success(t){void 0!==t.data.markup&&(e("#ld-profile").html(t.data.markup),c("#ld-profile .ld-search-prompt",!1))}})}),e("body").on("submit",".ld-item-search-fields",function(t){t.preventDefault();var a={shortcode_instance:e("#ld-profile").data("shortcode_instance")};a["ld-profile-search"]=e(this).parents(".ld-item-search-wrapper").find("#course_name_field").val(),a["ld-profile-search-nonce"]=e(this).parents(".ld-item-search-wrapper").find("form.ld-item-search-fields").data("nonce"),e("#ld-profile #ld-main-course-list").addClass("ld-loading"),e.ajax({type:"GET",url:ldVars.ajaxurl+"?action=ld30_ajax_profile_search",data:a,success(t){void 0!==t.data.markup&&(e("#ld-profile").html(t.data.markup),c("#ld-profile .ld-search-prompt",!1))}})}),e("body").on("click",".ld-pagination a",function(t){t.preventDefault();var a,s={},n={};e(this).attr("href").replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,a){s[t]=a}),s.pager_nonce=e(this).parents(".ld-pagination").data("pager-nonce"),s.pager_results=e(this).parents(".ld-pagination").data("pager-results"),s.context=e(this).data("context"),console.log("linkVars[%o]",s),n.currentTarget=t.currentTarget,"profile"!=s.context&&(s.lesson_id=e(this).data("lesson_id"),s.course_id=e(this).data("course_id"),e(".ld-course-nav-"+s.course_id).length&&(s.widget_instance=e(".ld-course-nav-"+s.course_id).data("widget_instance"))),"course_topics"==s.context&&(e("#ld-topic-list-"+s.lesson_id).addClass("ld-loading"),e("#ld-nav-content-list-"+s.lesson_id).addClass("ld-loading")),"course_content_shortcode"==s.context?(n.parent_container=e(n.currentTarget).closest(".ld-course-content-"+s.course_id),void 0!==n.parent_container&&n.parent_container.length?(e(n.parent_container).addClass("ld-loading"),s.shortcode_instance=e(n.parent_container).data("shortcode_instance")):(e(".ld-course-content-"+s.course_id).addClass("ld-loading"),s.shortcode_instance=e(".ld-course-content-"+s.course_id).data("shortcode_instance"))):"course_lessons"==s.context&&((void 0===n.parent_container||!n.parent_container.length)&&void 0!==(a=e(n.currentTarget).parents(".ld-lesson-navigation"))&&a.length&&(n.context_sub="course_navigation_widget",n.parent_container=e(n.currentTarget).parents("#ld-lesson-list-"+s.course_id)),(void 0===n.parent_container||!n.parent_container.length)&&void 0!==(a=e(n.currentTarget).parents(".ld-focus-sidebar-wrapper"))&&a.length&&(n.context_sub="focus_mode_sidebar",n.parent_container=e(n.currentTarget).parents("#ld-lesson-list-"+s.course_id)),void 0!==n.parent_container&&n.parent_container.length||(n.parent_container=e(n.currentTarget).closest("#ld-item-list-"+s.course_id,"#ld-lesson-list-"+s.course_id)),void 0!==n.parent_container&&n.parent_container.length?e(n.parent_container).addClass("ld-loading"):(e("#ld-item-list-"+s.course_id).addClass("ld-loading"),e("#ld-lesson-list-"+s.course_id).addClass("ld-loading"))),"profile"==s.context&&(e("#ld-profile #ld-main-course-list").addClass("ld-loading"),s.shortcode_instance=e("#ld-profile").data("shortcode_instance")),"profile_quizzes"==s.context&&e("#ld-course-list-item-"+s.pager_results.quiz_course_id+" .ld-item-contents").addClass("ld-loading"),"course_info_courses"==s.context&&(e(".ld-user-status").addClass("ld-loading"),s.shortcode_instance=e(".ld-user-status").data("shortcode-atts")),"group_courses"==s.context&&(s.group_id=e(this).data("group_id"),void 0!==s.group_id&&void 0!==(a=e(n.currentTarget).parents(".ld-group-courses-"+s.group_id))&&a.length&&(e(a).addClass("ld-loading"),n.parent_container=a)),e.ajax({type:"GET",url:ldVars.ajaxurl+"?action=ld30_ajax_pager",data:s,success(t){var a,i;"course_topics"==s.context&&(e("#ld-topic-list-"+s.lesson_id).length&&(void 0!==t.data.topics&&e("#ld-topic-list-"+s.lesson_id).html(t.data.topics),void 0!==t.data.pager&&e("#ld-expand-"+s.lesson_id).find(".ld-table-list-footer").html(t.data.pager),a=e(".ld-lesson-item-"+s.lesson_id).find(".ld-item-list-item-expanded"),i=0,a.find("> *").each(function(){i+=e(this).outerHeight()}),a.attr("data-height",""+(i+50)),a.css({"max-height":i+50}),e("#ld-topic-list-"+s.lesson_id).removeClass("ld-loading")),e("#ld-nav-content-list-"+s.lesson_id).length&&(void 0!==t.data.nav_topics&&e("#ld-nav-content-list-"+s.lesson_id).find(".ld-table-list-items").html(t.data.topics),void 0!==t.data.pager&&e("#ld-nav-content-list-"+s.lesson_id).find(".ld-table-list-footer").html(t.data.pager),e("#ld-nav-content-list-"+s.lesson_id).removeClass("ld-loading"))),"course_content_shortcode"==s.context?void 0!==t.data.markup&&(void 0!==n.parent_container&&n.parent_container.length?e(n.parent_container).replaceWith(t.data.markup):e("#learndash_post_"+s.course_id).replaceWith(t.data.markup)):"course_lessons"==s.context&&(void 0!==n.parent_container&&n.parent_container.length?"course_navigation_widget"==n.context_sub?void 0!==t.data.nav_lessons&&e(n.parent_container).html(t.data.nav_lessons).removeClass("ld-loading"):"focus_mode_sidebar"==n.context_sub?void 0!==t.data.nav_lessons&&e(n.parent_container).html(t.data.nav_lessons).removeClass("ld-loading"):void 0!==t.data.lessons&&e(n.parent_container).html(t.data.lessons).removeClass("ld-loading"):(e("#ld-item-list-"+s.course_id).length&&void 0!==t.data.lessons&&e("#ld-item-list-"+s.course_id).html(t.data.lessons).removeClass("ld-loading"),e("#ld-lesson-list-"+s.course_id).length&&void 0!==t.data.nav_lessons&&e("#ld-lesson-list-"+s.course_id).html(t.data.nav_lessons).removeClass("ld-loading"))),"group_courses"==s.context&&void 0!==n.parent_container&&n.parent_container.length&&void 0!==t.data.markup&&e(n.parent_container).html(t.data.markup).removeClass("ld-loading"),"profile"==s.context&&void 0!==t.data.markup&&e("#ld-profile").html(t.data.markup),"profile_quizzes"==s.context&&void 0!==t.data.markup&&(e("#ld-course-list-item-"+s.pager_results.quiz_course_id+" .ld-item-list-item-expanded .ld-item-contents").replaceWith(t.data.markup),e("#ld-course-list-item-"+s.pager_results.quiz_course_id).get(0).scrollIntoView({behavior:"smooth"})),"course_info_courses"==s.context&&void 0!==t.data.markup&&e(".ld-user-status").replaceWith(t.data.markup),e("body").trigger("ld_has_paginated"),p()}})}),e("#learndash_timer").length){var m=jQuery("#learndash_timer"),v=m.attr("data-timer-seconds"),b=jQuery(m.attr("data-button")),w=m.attr("data-cookie-key");if(void 0!==w)var y="learndash_timer_cookie_"+w;else var y="learndash_timer_cookie";void 0!==(cookie_timer_seconds=jQuery.cookie(y))&&(v=parseInt(cookie_timer_seconds)),0==v&&e(m).hide(),e(b).on("learndash-time-finished",function(){e(m).hide()})}function x(t){e("#total-row").attr("data-total",t.total.value),e('form[name="buynow"] input[name="amount"]').val(t.total.value),e('form.learndash-stripe-checkout input[name="stripe_price"]').val(t.total.stripe_value);let a=e('.learndash-stripe-checkout input[name="stripe_course_id"]').val();a&&(LD_Cookies.remove("ld_stripe_session_id_"+a),LD_Cookies.remove("ld_stripe_connect_session_id_"+a)),"function"==typeof ld_init_stripe_legacy&&ld_init_stripe_legacy()}e(document).on("learndash_video_disable_assets",function(t,a){if("undefined"==typeof learndash_video_data)return!1;"BEFORE"==learndash_video_data.videos_shown&&(!0==a?(e(".ld-lesson-topic-list").hide(),e(".ld-lesson-navigation").find("#ld-nav-content-list-"+ldVars.postID).addClass("user_has_no_access"),e(".ld-quiz-list").hide()):(e(".ld-lesson-topic-list").slideDown(),e(".ld-quiz-list").slideDown(),e(".ld-lesson-navigation").find("#ld-nav-content-list-"+ldVars.postID).removeClass("user_has_no_access")))}),e(".learndash-wrapper").on("click",'.wpProQuiz_questionListItem input[type="radio"]',function(t){e(this).parents(".wpProQuiz_questionList").find("label").removeClass("is-selected"),e(this).parents("label").addClass("is-selected")}),e(".learndash-wrapper").on("click",'.wpProQuiz_questionListItem input[type="checkbox"]',function(t){jQuery(t.currentTarget).is(":checked")?e(this).parents("label").addClass("is-selected"):e(this).parents("label").removeClass("is-selected")}),e(".btn-join").on("click",function(t){if(e(this).hasClass("btn-disabled"))return t.preventDefault(),!1;let a=parseFloat(e("#total-row").attr("data-total"));if(0===a)return e.ajax({type:"POST",url:ldVars.ajaxurl,dataType:"json",cache:!1,data:{action:"learndash_enroll_with_zero_price",nonce:e("#apply-coupon-form").data("nonce"),post_id:e("#apply-coupon-form").data("post-id")},success(e){e.success?window.location.replace(e.data.redirect_url):alert(e.data.message)}}),t.preventDefault(),!1}),e("#apply-coupon-form").on("submit",function(t){t.preventDefault(),e.ajax({type:"POST",url:ldVars.ajaxurl,dataType:"json",cache:!1,data:{action:"learndash_apply_coupon",nonce:e(this).data("nonce"),coupon_code:e(this).find("#coupon-field").val(),post_id:e(this).data("post-id")},success(t){e("#coupon-alerts .coupon-alert").hide();let a=e("#coupon-alerts").find(t.success?".coupon-alert-success":".coupon-alert-warning"),s=e("#coupon-row");t.success&&(s.find(".purchase-label > span").html(t.data.coupon_code),s.find(".purchase-value span").html(t.data.discount),s.css("display","flex").hide().fadeIn(),e("#total-row .purchase-value").html(t.data.total.formatted),e("#totals").show(),x(t.data)),a.find(".ld-alert-messages").html(t.data.message),a.fadeIn()}})}),e("#remove-coupon-form").on("submit",function(t){t.preventDefault(),e.ajax({type:"POST",url:ldVars.ajaxurl,dataType:"json",cache:!1,data:{action:"learndash_remove_coupon",nonce:e(this).data("nonce"),post_id:e(this).data("post-id")},success(t){e("#coupon-alerts .coupon-alert").hide();let a=e("#coupon-alerts").find(t.success?".coupon-alert-success":".coupon-alert-warning");t.success&&(e("#coupon-row").hide(),e("#coupon-field").val(""),e("#price-row .purchase-value").html(t.data.total.formatted),e("#subtotal-row .purchase-value").html(t.data.total.formatted),e("#total-row .purchase-value").html(t.data.total.formatted),e("#totals").hide(),x(t.data)),a.find(".ld-alert-messages").html(t.data.message),a.fadeIn()}})})}),function(e,t){"use strict";var a={widgetsTypes:{},createWidgetType:function(t,s,n){function i(){n.apply(this,arguments)}n=n||this.Widget;var o=i.prototype=new n(t);return o.types=o.types.concat([t]),e.extend(o,s),(o.constructor=i).extend=function(e,t){return a.createWidgetType(e,t,i)},i},addWidgetType:function(e,t,a){return t&&t.prototype instanceof this.Widget?this.widgetsTypes[e]=t:this.widgetsTypes[e]=this.createWidgetType(e,t,a)},getWidgetType:function(e){return this.widgetsTypes[e]}};a.Instance=function(){var t=this,s={};this.createWidget=function(e,s){return(e=new(a.getWidgetType(e))(e)).init(t,s=s||{}),e},this.getSettings=function(e){return e?s[e]:Object.create(s)},this.init=function(a){return e.extend(s,{classPrefix:"dialog",effects:{show:"fadeIn",hide:"fadeOut"}},a),e("body"),t},t.init()},a.Widget=function(t){function s(e,t){var e=r.effects[e],a=u.widget;if("function"==typeof e)e.apply(a,t);else{if(!a[e])throw"Reference Error: The effect "+e+" not found";a[e].apply(a,t)}}function n(t){if(!g(t)){if(r.hide.onClick){if(e(t.target).closest(r.selectors.preventClose).length)return}else if(t.target!==this)return;l.hide()}}function i(t){g(t)||e(t.target).closest(u.widget).length||f(t)||l.hide()}function o(e){27===e.which&&l.hide()}function d(){var e=[u.window];u.iframe&&e.push(jQuery(u.iframe[0].contentWindow)),e.forEach(function(e){r.hide.onEscKeyPress&&e.off("keyup",o),r.hide.onOutsideClick&&e[0].removeEventListener("click",i,!0),r.hide.onOutsideContextMenu&&e[0].removeEventListener("contextmenu",i,!0),r.position.autoRefresh&&e.off("resize",l.refreshPosition)}),(r.hide.onClick||r.hide.onBackgroundClick)&&u.widget.off("click",n)}var l=this,r={},c={},u={},p=0,h=["refreshPosition"],f=function(t){return!!r.hide.ignore&&!!e(t.target).closest(r.hide.ignore).length},g=function(e){return"click"===e.type&&2===e.button};this.addElement=function(t,a,s){return a=u[t]=e(a||"<div>"),t=t.replace(/([a-z])([A-Z])/g,function(){return arguments[1]+"-"+arguments[2].toLowerCase()}),s=s?s+" ":"",s=(s+=r.classes.globalPrefix+"-"+t)+(" "+r.classes.prefix)+"-"+t,a.addClass(s),a},this.destroy=function(){return d(),u.widget.remove(),l.trigger("destroy"),l},this.getElements=function(e){return e?u[e]:u},this.getSettings=function(e){var t=Object.create(r);return e?t[e]:t},this.hide=function(){if(l.isVisible())return clearTimeout(p),s("hide",arguments),d(),r.preventScroll&&l.getElements("body").removeClass(r.classes.preventScroll),l.trigger("hide"),l},this.init=function(s,n){var i,o,d,c,p;if(s instanceof a.Instance)return i=h.concat(l.getClosureMethods()),e.each(i,function(){var e=l[this];l[this]=function(){e.apply(l,arguments)}}),l.trigger("init",n),c=s,p=n,r={headerMessage:"",message:"",effects:(c=e.extend(!0,{},c.getSettings())).effects,classes:{globalPrefix:c.classPrefix,prefix:c.classPrefix+"-"+t,preventScroll:c.classPrefix+"-prevent-scroll"},selectors:{preventClose:"."+c.classPrefix+"-prevent-close"},container:"body",preventScroll:!1,iframe:null,closeButton:!1,closeButtonOptions:{iconClass:c.classPrefix+"-close-button-icon",attributes:{role:"button",tabindex:0,"aria-label":"Close",href:"#"},iconElement:"<i>"},position:{element:"widget",my:"center",at:"center",enable:!0,autoRefresh:!1},hide:{auto:!1,autoDelay:5e3,onClick:!1,onOutsideClick:!0,onOutsideContextMenu:!1,onBackgroundClick:!0,onEscKeyPress:!0,ignore:""}},e.extend(!0,r,l.getDefaultSettings(),p),e.each(r,function(e){(e=e.match(/^on([A-Z].*)/))&&(e=e[1].charAt(0).toLowerCase()+e[1].slice(1),l.on(e,this))}),l.addElement("widget"),l.addElement("header"),l.addElement("message"),l.addElement("window",window),l.addElement("body",document.body),l.addElement("container",r.container),r.iframe&&l.addElement("iframe",r.iframe),r.closeButton&&(r.closeButtonClass&&(r.closeButtonOptions.iconClass=r.closeButtonClass),i=e("<a>",r.closeButtonOptions.attributes),o=e(r.closeButtonOptions.iconElement).addClass(r.closeButtonOptions.iconClass),i.append(o),l.addElement("closeButton",i)),(o=l.getSettings("id"))&&l.setID(o),d=[],e.each(l.types,function(){d.push(r.classes.globalPrefix+"-type-"+this)}),d.push(l.getSettings("className")),u.widget.addClass(d.join(" ")).attr({"aria-modal":!0,role:"document",tabindex:0}),l.buildWidget(),l.attachEvents(),l.trigger("ready"),l;throw"The "+l.widgetName+" must to be initialized from an instance of DialogsManager.Instance"},this.isVisible=function(){return u.widget.is(":visible")},this.on=function(t,a){return"object"==typeof t?e.each(t,function(e){l.on(e,this)}):t.split(" ").forEach(function(e){c[e]||(c[e]=[]),c[e].push(a)}),l},this.off=function(e,t){return c[e]&&(t?-1!==(t=c[e].indexOf(t))&&c[e].splice(t,1):delete c[e]),l},this.refreshPosition=function(){var t,a,s,n,i,o,d;r.position.enable&&(u[(t=e.extend({},r.position)).of]&&(t.of=u[t.of]),t.of||(t.of=window),r.iframe&&(a=t).my&&(s=/([+-]\d+)?$/,n=u.iframe.offset(),i=u.iframe[0].contentWindow,o=a.my.split(" "),d=[],1===o.length&&(/left|right/.test(o[0])?o.push("center"):o.unshift("center")),o.forEach(function(e,t){e=e.replace(s,function(e){return e=+e||0,e=0<=(e+=t?n.top-i.scrollY:n.left-i.scrollX)?"+"+e:e}),d.push(e)}),a.my=d.join(" ")),u[t.element].position(t))},this.setID=function(e){return u.widget.attr("id",e),l},this.setHeaderMessage=function(e){return l.getElements("header").html(e),l},this.setMessage=function(e){return u.message.html(e),l},this.setSettings=function(t,a){return jQuery.isPlainObject(a)?e.extend(!0,r[t],a):r[t]=a,l},this.show=function(){var e;return clearTimeout(p),u.widget.appendTo(u.container).hide(),s("show",arguments),l.refreshPosition(),r.hide.auto&&(p=setTimeout(l.hide,r.hide.autoDelay)),e=[u.window],u.iframe&&e.push(jQuery(u.iframe[0].contentWindow)),e.forEach(function(e){r.hide.onEscKeyPress&&e.on("keyup",o),r.hide.onOutsideClick&&e[0].addEventListener("click",i,!0),r.hide.onOutsideContextMenu&&e[0].addEventListener("contextmenu",i,!0),r.position.autoRefresh&&e.on("resize",l.refreshPosition)}),(r.hide.onClick||r.hide.onBackgroundClick)&&u.widget.on("click",n),r.preventScroll&&l.getElements("body").addClass(r.classes.preventScroll),l.trigger("show"),l},this.trigger=function(t,a){var s="on"+t[0].toUpperCase()+t.slice(1),s=(l[s]&&l[s](a),c[t]);if(s)return e.each(s,function(e,t){t.call(l,a)}),l}},a.Widget.prototype.types=[],a.Widget.prototype.buildWidget=function(){var e=this.getElements(),t=this.getSettings();e.widget.append(e.header,e.message),this.setHeaderMessage(t.headerMessage),this.setMessage(t.message),this.getSettings("closeButton")&&e.widget.prepend(e.closeButton)},a.Widget.prototype.attachEvents=function(){var e=this;e.getSettings("closeButton")&&e.getElements("closeButton").on("click",function(t){t.preventDefault(),e.hide()})},a.Widget.prototype.getDefaultSettings=function(){return{}},a.Widget.prototype.getClosureMethods=function(){return[]},a.Widget.prototype.onHide=function(){},a.Widget.prototype.onShow=function(){},a.Widget.prototype.onInit=function(){},a.Widget.prototype.onReady=function(){},a.widgetsTypes.simple=a.Widget,a.addWidgetType("buttons",{activeKeyUp:function(e){9===e.which&&e.preventDefault(),this.hotKeys[e.which]&&this.hotKeys[e.which](this)},activeKeyDown:function(e){var t,a;this.focusedButton&&9===e.which&&(e.preventDefault(),t=this.focusedButton.index(),e.shiftKey?(a=t-1)<0&&(a=this.buttons.length-1):(a=t+1)>=this.buttons.length&&(a=0),this.focusedButton=this.buttons[a].trigger("focus"))},addButton:function(t){function a(){n.hide.onButtonClick&&s.hide(),"function"==typeof t.callback&&t.callback.call(this,s)}var s=this,n=s.getSettings(),i=jQuery.extend(n.button,t),o=t.classes?t.classes+" ":"",i=(o+=n.classes.globalPrefix+"-button",s.addElement(t.name,e("<"+i.tag+">").html(t.text),o));return s.buttons.push(i),i.on("click",a),t.hotKey&&(this.hotKeys[t.hotKey]=a),this.getElements("buttonsWrapper").append(i),t.focus&&(this.focusedButton=i),s},bindHotKeys:function(){this.getElements("window").on({keyup:this.activeKeyUp,keydown:this.activeKeyDown})},buildWidget:function(){a.Widget.prototype.buildWidget.apply(this,arguments);var e=this.addElement("buttonsWrapper");this.getElements("widget").append(e)},getClosureMethods:function(){return["activeKeyUp","activeKeyDown"]},getDefaultSettings:function(){return{hide:{onButtonClick:!0},button:{tag:"button"}}},onHide:function(){this.unbindHotKeys()},onInit:function(){this.buttons=[],this.hotKeys={},this.focusedButton=null},onShow:function(){this.bindHotKeys(),this.focusedButton||(this.focusedButton=this.buttons[0]),this.focusedButton&&this.focusedButton.trigger("focus")},unbindHotKeys:function(){this.getElements("window").off({keyup:this.activeKeyUp,keydown:this.activeKeyDown})}}),a.addWidgetType("lightbox",a.getWidgetType("buttons").extend("lightbox",{getDefaultSettings:function(){var t=a.getWidgetType("buttons").prototype.getDefaultSettings.apply(this,arguments);return e.extend(!0,t,{contentWidth:"auto",contentHeight:"auto",position:{element:"widgetContent",of:"widget",autoRefresh:!0}})},buildWidget:function(){a.getWidgetType("buttons").prototype.buildWidget.apply(this,arguments);var e=this.addElement("widgetContent"),t=this.getElements();e.append(t.header,t.message,t.buttonsWrapper),t.widget.html(e),t.closeButton&&e.prepend(t.closeButton)},onReady:function(){var e=this.getElements(),t=this.getSettings();"auto"!==t.contentWidth&&e.message.width(t.contentWidth),"auto"!==t.contentHeight&&e.message.height(t.contentHeight)}})),a.addWidgetType("confirm",a.getWidgetType("lightbox").extend("confirm",{onReady:function(){a.getWidgetType("lightbox").prototype.onReady.apply(this,arguments);var e=this.getSettings("strings"),t="cancel"===this.getSettings("defaultOption");this.addButton({name:"cancel",text:e.cancel,callback:function(e){e.trigger("cancel")},focus:t}),this.addButton({name:"ok",text:e.confirm,callback:function(e){e.trigger("confirm")},focus:!t})},getDefaultSettings:function(){var e=a.getWidgetType("lightbox").prototype.getDefaultSettings.apply(this,arguments);return e.strings={confirm:"OK",cancel:"Cancel"},e.defaultOption="cancel",e}})),a.addWidgetType("alert",a.getWidgetType("lightbox").extend("alert",{onReady:function(){a.getWidgetType("lightbox").prototype.onReady.apply(this,arguments);var e=this.getSettings("strings");this.addButton({name:"ok",text:e.confirm,callback:function(e){e.trigger("confirm")}})},getDefaultSettings:function(){var e=a.getWidgetType("lightbox").prototype.getDefaultSettings.apply(this,arguments);return e.strings={confirm:"OK"},e}})),t.DialogsManager=a}("undefined"!=typeof jQuery?jQuery:"function"==typeof require&&require("jquery"),"undefined"!=typeof module&&void 0!==module.exports?module.exports:window);